# Maintainer: Barnab√© di Kartola <barnabedikartola@gmail.com>

pkgname=noto-nerd-fonts-lite
pkgver=3.4.0
pkgrel=2
pkgdesc="Google Noto TTF fonts (nerd lite version)"
arch=('any')
license=('Apache-2.0')
url="https://github.com/ryanoasis/nerd-fonts"
conflicts=('noto-fonts-sans-nerd')
provides=("$pkgname")
source=("https://github.com/ryanoasis/nerd-fonts/releases/download/v${pkgver}/Noto.tar.xz")
sha256sums=('e28b31609d17fc50bdf9e6730c947a61b0e474af726c2c044c39bc78fcd9bfde')
install="${pkgname}.install"

package() {
    cd "$srcdir"
    
    install -d "${pkgdir}/usr/share/fonts/noto-nerd"
    
    # Install Noto Mono Nerd Font (Legacy Noto Mono - Only Regular exists in upstream)
    find . -name "NotoMonoNerdFont-Regular.ttf" -exec install -m644 {} "${pkgdir}/usr/share/fonts/noto-nerd/" \;

    # Install Noto Sans Mono Nerd Font (Replaces NotoMono with weights)
    # Mapping user's NotoMono requests to NotoSansM (Mono) variants
    find . -name "NotoSansMNerdFont-Bold.ttf" -exec install -m644 {} "${pkgdir}/usr/share/fonts/noto-nerd/" \;
    find . -name "NotoSansMNerdFont-Light.ttf" -exec install -m644 {} "${pkgdir}/usr/share/fonts/noto-nerd/" \;
    find . -name "NotoSansMNerdFont-Medium.ttf" -exec install -m644 {} "${pkgdir}/usr/share/fonts/noto-nerd/" \;
    find . -name "NotoSansMNerdFont-Regular.ttf" -exec install -m644 {} "${pkgdir}/usr/share/fonts/noto-nerd/" \;
    find . -name "NotoSansMNerdFont-Thin.ttf" -exec install -m644 {} "${pkgdir}/usr/share/fonts/noto-nerd/" \;

    # Install Noto Sans Nerd Font variants (Proportional)
    find . -name "NotoSansNerdFont-BoldItalic.ttf" -exec install -m644 {} "${pkgdir}/usr/share/fonts/noto-nerd/" \;
    find . -name "NotoSansNerdFont-Bold.ttf" -exec install -m644 {} "${pkgdir}/usr/share/fonts/noto-nerd/" \;
    find . -name "NotoSansNerdFont-Italic.ttf" -exec install -m644 {} "${pkgdir}/usr/share/fonts/noto-nerd/" \;
    find . -name "NotoSansNerdFont-LightItalic.ttf" -exec install -m644 {} "${pkgdir}/usr/share/fonts/noto-nerd/" \;
    find . -name "NotoSansNerdFont-Light.ttf" -exec install -m644 {} "${pkgdir}/usr/share/fonts/noto-nerd/" \;
    find . -name "NotoSansNerdFont-MediumItalic.ttf" -exec install -m644 {} "${pkgdir}/usr/share/fonts/noto-nerd/" \;
    find . -name "NotoSansNerdFont-Medium.ttf" -exec install -m644 {} "${pkgdir}/usr/share/fonts/noto-nerd/" \;
    find . -name "NotoSansNerdFont-Regular.ttf" -exec install -m644 {} "${pkgdir}/usr/share/fonts/noto-nerd/" \;
    find . -name "NotoSansNerdFont-ThinItalic.ttf" -exec install -m644 {} "${pkgdir}/usr/share/fonts/noto-nerd/" \;
    find . -name "NotoSansNerdFont-Thin.ttf" -exec install -m644 {} "${pkgdir}/usr/share/fonts/noto-nerd/" \;

    # Install configuration files
    install -d "${pkgdir}/etc/fonts/conf.d"
    
    if [ -d "${startdir}/../etc/fonts/conf.d" ]; then
        install -m644 "${startdir}/../etc/fonts/conf.d/81-noto-mono-nerd-spacing.conf" "${pkgdir}/etc/fonts/conf.d/"
        install -m644 "${startdir}/../etc/fonts/conf.d/82-noto-nerd-medium.conf" "${pkgdir}/etc/fonts/conf.d/"
    else
        echo "Warning: Config files not found in ${startdir}/../etc/fonts/conf.d"
    fi
}
